# View Modes: 3D, Topic, and Gaps

> **Version**: 0.4.0
> **Last Updated**: 2026-01-25

---

## Overview

ScholaRAG_Graph provides three interactive visualization modes inspired by InfraNodus, each designed for different exploration and analysis needs.

| Mode | Icon | Color | Purpose | Technology |
|------|------|-------|---------|------------|
| **3D View** | Box | Teal | Full knowledge graph exploration | Three.js + Force Graph |
| **Topic View** | Grid2X2 | Purple | Topic clustering and communities | D3.js force layout |
| **Gaps View** | AlertTriangle | Amber | Research gap identification | Three.js + Ghost Edges |

---

## 3D View Mode

### Purpose

Explore the full knowledge graph with interactive physics simulation. Best for:
- Understanding overall knowledge structure
- Identifying central concepts
- Exploring relationships between concepts
- Following citation paths

### Features

#### Physics-Based Layout
- **Force Simulation**: Customizable attraction/repulsion parameters
- **Charge Force**: Controls node spacing (default: -300)
- **Link Distance**: Edge length (default: 80)
- **Gravity**: Center pull strength (default: 0.1)

#### Interactive Controls
- **Click Node**: Highlight connected nodes
- **Drag Node**: Reposition and pin nodes
- **Orbit Camera**: 360Â° rotation and zoom
- **Search**: Jump to specific concepts

#### Visual Design
- **Selected Node**: Yellow glow effect
- **Connected Nodes**: Green glow effect
- **Edges**: Semi-transparent lines with varying opacity
- **Node Size**: Scaled by importance (PageRank)

### Configuration Panel

```
Physics Controls:
- Charge: -500 to -100 (node repulsion)
- Link Distance: 50-150 (edge length)
- Gravity: 0-1 (center pull)
```

### Technical Details

```typescript
// Three.js ForceGraph3D
<ForceGraph3D
  graphData={data}
  nodeThreeObject={node => createSphere(node)}
  linkThreeObject={link => createLine(link)}
  onNodeClick={handleNodeClick}
  onNodeDrag={handleNodeDrag}
  enableNodeDrag={true}
  enableNavigationControls={true}
/>
```

---

## Topic View Mode

### Purpose

Discover research topics through community detection algorithms. Best for:
- Identifying research themes
- Understanding topical structure
- Finding topic boundaries
- Exploring cross-topic connections

### Features

#### Community Detection
- **Algorithm**: Louvain algorithm
- **Output**: Topic clusters with coherent themes
- **Visualization**: Color-coded node groups

#### Topic Clustering
- **Layout**: D3.js force-directed graph
- **Grouping**: Visual clustering by topic
- **Labels**: Topic names auto-generated by LLM

#### Interactive Features
- **Zoom Levels**: Semantic zoom (0.5x - 3x)
  - **High Zoom**: Individual concepts visible
  - **Medium Zoom**: Topic labels appear
  - **Low Zoom**: Cluster overview
- **Click Topic**: Expand/collapse cluster
- **Hover**: Show topic statistics

### Main Topics Panel

Located on the right side, displays:
- **Topic Name**: LLM-generated theme
- **Node Count**: Number of concepts
- **Percentage**: Proportion of total graph
- **Color**: Cluster color indicator

```
Example:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Machine Learning (18%)         â”‚
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  â”‚
â”‚ 47 concepts                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Technical Details

```typescript
// D3.js Force Simulation
const simulation = d3.forceSimulation(nodes)
  .force('link', d3.forceLink(links).distance(80))
  .force('charge', d3.forceManyBody().strength(-300))
  .force('center', d3.forceCenter(width / 2, height / 2))
  .force('collision', d3.forceCollide().radius(30));
```

---

## Gaps View Mode

### Purpose

Identify research gaps and potential connections. Best for:
- Finding under-explored research areas
- Discovering bridge concepts
- Planning new research directions
- Identifying innovation opportunities

### Features

#### Ghost Edge Visualization
Displays potential connections as semi-transparent dashed lines:
- **Yellow Dashed Lines**: High-similarity concept pairs
- **Opacity**: Proportional to similarity score (40-80%)
- **Selection**: Click to show details

#### Gap Detection Algorithm
1. **Clustering**: Group concepts by topic (Louvain)
2. **Similarity**: Calculate cosine similarity between clusters
3. **Threshold**: Filter pairs with similarity > 0.3
4. **Ranking**: Sort by PageRank Ã— Betweenness Centrality

#### AI Bridge Hypotheses
Click any gap to generate:
- **Bridge Concepts**: LLM-suggested connecting ideas
- **Research Questions**: Potential research directions
- **Impact Score**: Estimated research value (High/Medium/Low)

### Gap Panel

Located on the right side, displays:
- **Gap Rank**: Ordered by importance
- **Cluster Pair**: e.g., "Machine Learning â†” Education"
- **Similarity Score**: Semantic similarity (0-1)
- **Status**: `New` / `Reviewed` / `In Progress`

```
Example:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Gap #1 (High Impact)           â”‚
â”‚ Machine Learning â†” Education   â”‚
â”‚ Similarity: 0.68               â”‚
â”‚ [Generate Bridge Concepts]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ghost Edge Rendering

```typescript
// Three.js LineDashedMaterial
const ghostMaterial = new THREE.LineDashedMaterial({
  color: 0xffaa00,
  dashSize: 3,
  gapSize: 2,
  opacity: 0.4 + similarity * 0.4,
  transparent: true,
});
```

### Bridge Hypothesis Example

When you click "Generate Bridge Concepts":

```
ğŸŒ‰ Bridge Concepts:
1. "Adaptive Learning Systems" (Impact: High)
   â†’ Connects ML algorithms to personalized education

2. "Educational Data Mining" (Impact: Medium)
   â†’ Links predictive models to student outcomes

ğŸ“ Research Questions:
- How can ML models adapt to individual learning styles?
- What are ethical implications of AI-driven education?
```

---

## Switching Between Modes

### Toolbar Icons

Located at the top of the graph interface:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Box]  [Grid2X2]  [AlertTriangle]       â”‚
â”‚  3D      Topic        Gaps               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Keyboard Shortcuts

| Key | Mode |
|-----|------|
| `1` | 3D View |
| `2` | Topic View |
| `3` | Gaps View |

### Mode Persistence

Current view mode is saved to local storage and restored on page reload.

---

## Common Features Across All Modes

### Search Functionality
- **Type to Search**: Find concepts by name
- **Auto-Complete**: Suggestions as you type
- **Jump to Node**: Camera focuses on selected node

### Node Filtering
- **Entity Type**: Concept / Method / Finding
- **Importance**: Filter by PageRank threshold
- **Cluster**: Show/hide specific topics

### Export Options
- **PNG**: Screenshot of current view
- **JSON**: Graph data (nodes + edges)
- **CSV**: Node/edge list for external analysis

### Insight HUD

Real-time graph metrics displayed in bottom-right corner:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Nodes: 234                  â”‚
â”‚ Edges: 1,047                â”‚
â”‚ Clusters: 12                â”‚
â”‚ Modularity: 0.68            â”‚
â”‚ Avg Path Length: 3.2        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Performance Considerations

| View Mode | Max Recommended Nodes | Rendering Time |
|-----------|----------------------|----------------|
| 3D View | 500 | < 2 seconds |
| Topic View | 1,000 | < 3 seconds |
| Gaps View | 300 | < 5 seconds (includes gap analysis) |

### Optimization Tips

1. **Filter First**: Use entity type filters to reduce node count
2. **Disable Physics**: Pause simulation during navigation
3. **Reduce Ghost Edges**: Increase similarity threshold in Gaps mode
4. **Canvas Size**: Smaller viewport = faster rendering

---

## API Endpoints

### 3D View Data
```
GET /api/graph/visualization/{project_id}
Response: {nodes, edges, clusters}
```

### Topic Clustering
```
GET /api/graph/topics/{project_id}
Response: {topics, assignments, modularity}
```

### Gap Analysis
```
GET /api/graph/gaps/{project_id}/analysis
Response: {gaps, ghost_edges, bridge_concepts}
```

---

## Configuration Options

### View Mode Settings

Accessible via Settings Panel in each mode:

#### 3D View Settings
```json
{
  "physics": {
    "charge": -300,
    "linkDistance": 80,
    "gravity": 0.1
  },
  "visual": {
    "nodeSize": "pagerank",
    "edgeOpacity": 0.3,
    "highlightColor": "#FFD700"
  }
}
```

#### Topic View Settings
```json
{
  "clustering": {
    "algorithm": "louvain",
    "resolution": 1.0
  },
  "zoom": {
    "min": 0.5,
    "max": 3.0,
    "labelThreshold": 1.2
  }
}
```

#### Gaps View Settings
```json
{
  "gaps": {
    "minSimilarity": 0.3,
    "maxGhostEdges": 50,
    "rankingMetric": "impact"
  },
  "ai": {
    "bridgeHypotheses": true,
    "maxSuggestions": 5
  }
}
```

---

## Troubleshooting

### Common Issues

#### 3D View Performance Issues
- **Symptom**: Laggy rotation/zoom
- **Solution**: Reduce node count or disable physics simulation

#### Topic View Clustering Quality
- **Symptom**: Too many/few clusters
- **Solution**: Adjust Louvain resolution parameter (0.5-2.0)

#### Gaps View Missing Ghost Edges
- **Symptom**: No dashed lines visible
- **Solution**: Lower similarity threshold (try 0.2-0.25)

---

## Future Enhancements

Planned features for upcoming releases:

- **Temporal View**: Track topic evolution over publication years
- **Author View**: Visualize co-authorship networks
- **Citation Flow**: Animated citation paths
- **Custom Layouts**: User-defined force parameters
- **Multi-Graph Comparison**: Side-by-side view of different projects

---

## References

- **InfraNodus**: https://infranodus.com/
- **Force-Graph**: https://github.com/vasturiano/react-force-graph
- **D3.js Force Layout**: https://d3js.org/d3-force
- **Louvain Algorithm**: [Blondel et al., 2008](https://arxiv.org/abs/0803.0476)

---

*For implementation details, see `frontend/components/graph/` directory*
