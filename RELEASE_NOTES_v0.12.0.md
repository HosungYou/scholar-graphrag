# Release Notes — v0.12.0

> **Version**: 0.12.0 | **Date**: 2026-02-07
> **Theme**: Gap Analysis Enhancement — LLM Labels, Paper Recommendations, Report Export

---

## New Features

### 1. LLM-Summarized Cluster Labels

Cluster labels are now generated by LLM instead of raw concept name lists.

- `GapDetector._generate_cluster_label()` sends top 10 keywords to LLM with a "3-5 word topic label" prompt
- 5-second timeout via `asyncio.wait_for()` prevents blocking
- Graceful fallback to `keyword1 / keyword2 / keyword3` when LLM is unavailable
- LLM provider injected into `refresh_gap_analysis` via `get_llm_provider()` from `dependencies.py`

**Files**: `backend/graph/gap_detector.py`, `backend/routers/graph.py`

### 2. Gap-Based Paper Recommendations

Find related papers for any structural gap using Semantic Scholar.

- `GET /api/graph/gaps/{project_id}/recommendations/{gap_id}?limit=5`
- Builds search query from `bridge_candidates[:3]` + `cluster_a_names[:2]` + `cluster_b_names[:2]`
- Returns title, year, citation count, DOI/arXiv URL, abstract snippet (200 chars)
- 15-second timeout; empty papers array on failure (not 500 error)
- Project ownership validated via `WHERE id = $1 AND project_id = $2`

**Frontend**: "Find Papers" button in GapPanel with recommendation cards.

**Files**: `backend/routers/graph.py`, `frontend/lib/api.ts`, `frontend/components/graph/GapPanel.tsx`

### 3. Gap Analysis Report Export

Export the full gap analysis as a downloadable Markdown report.

- `GET /api/graph/gaps/{project_id}/export?format=markdown`
- Includes: project name, research question, cluster table, structural gaps with bridge candidates and research questions, summary statistics
- Returns `StreamingResponse` with `Content-Disposition: attachment`
- 404 with guidance message when no gap analysis data exists

**Frontend**: "Export Report" button at bottom of GapPanel. Downloads `.md` file via blob URL.

**Files**: `backend/routers/graph.py`, `frontend/lib/api.ts`, `frontend/components/graph/GapPanel.tsx`

---

## API Changes

| Method | Path | Description |
|--------|------|-------------|
| GET | `/api/graph/gaps/{pid}/recommendations/{gid}` | Paper recommendations for a gap |
| GET | `/api/graph/gaps/{pid}/export` | Export gap report as Markdown |

---

## Edge Cases Handled

| Scenario | Behavior |
|----------|----------|
| LLM not configured | Fallback label (keyword join), no error |
| LLM timeout (>5s) | Fallback label, warning logged |
| Semantic Scholar 429/timeout | Empty papers array, query_used still returned |
| Gap not in project | 404 "Gap not found in this project" |
| No gap analysis data | 404 "No gap analysis data. Run gap detection first." |

---

## Dependencies

No new dependencies added. Uses existing:
- `backend/integrations/semantic_scholar.py` — `SemanticScholarClient`
- `backend/dependencies.py` — `get_llm_provider()`
- `lucide-react` — `BookOpen`, `Download` icons (already installed)

---

## Migration

No database migrations required. All changes use existing `concept_clusters` and `structural_gaps` tables.
