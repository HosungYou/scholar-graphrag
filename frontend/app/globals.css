@tailwind base;
@tailwind components;
@tailwind utilities;

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap');
@import '@fontsource/jetbrains-mono/400.css';
@import '@fontsource/jetbrains-mono/500.css';

@layer base {
  html {
    scroll-behavior: smooth;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  body {
    @apply bg-surface-0 text-text-primary font-sans;
  }

  ::selection {
    background: rgba(91, 154, 139, 0.25);
    color: #d4dae8;
  }

  ::-webkit-scrollbar {
    width: 4px;
  }
  ::-webkit-scrollbar-track {
    background: transparent;
  }
  ::-webkit-scrollbar-thumb {
    background: rgba(212, 218, 232, 0.08);
    border-radius: 2px;
  }
  ::-webkit-scrollbar-thumb:hover {
    background: rgba(212, 218, 232, 0.15);
  }
}

@layer components {
  /* Primary button — teal border, no fill */
  .btn-primary {
    @apply inline-flex items-center gap-2 px-5 py-2 text-sm font-mono font-medium rounded transition-colors duration-150;
    color: #5b9a8b;
    border: 1px solid rgba(91, 154, 139, 0.3);
  }
  .btn-primary:hover {
    background: rgba(91, 154, 139, 0.08);
    border-color: rgba(91, 154, 139, 0.5);
  }

  /* Ghost button — text only with arrow */
  .btn-ghost {
    @apply inline-flex items-center gap-2 px-3 py-2 text-sm font-medium transition-colors duration-150;
    @apply text-text-tertiary;
  }
  .btn-ghost:hover {
    @apply text-text-primary;
  }

  /* Divider — thin solid line */
  .divider {
    @apply h-px w-full;
    background: rgba(212, 218, 232, 0.06);
  }

  /* Dotted divider — chart auxiliary line */
  .divider-dotted {
    @apply w-full;
    height: 1px;
    background-image: linear-gradient(to right, rgba(212, 218, 232, 0.1) 2px, transparent 2px);
    background-size: 6px 1px;
  }

  /* Grid pattern background — observatory chart grid */
  .chart-grid {
    background-image:
      linear-gradient(rgba(91, 154, 139, 0.03) 1px, transparent 1px),
      linear-gradient(90deg, rgba(91, 154, 139, 0.03) 1px, transparent 1px);
    background-size: 60px 60px;
  }

  /* Skip link */
  .skip-link {
    @apply absolute -translate-y-full focus:translate-y-0 px-4 py-2 z-[100] text-sm font-medium rounded-b;
    background: #5b9a8b;
    color: #080c16;
    transition: transform 0.2s;
  }

  /* Touch target */
  .touch-target {
    min-height: 44px;
    min-width: 44px;
  }
}

/* React Flow — matches star chart aesthetic */
.react-flow__background {
  background: #080c16 !important;
}
.react-flow__edge-path {
  stroke-width: 1;
  stroke: rgba(212, 218, 232, 0.06);
  transition: all 0.3s;
}
.react-flow__edge.highlighted .react-flow__edge-path {
  stroke: #5b9a8b;
  stroke-width: 1.5;
  stroke-dasharray: 6 3;
  animation: flowLine 2s linear infinite;
}
.react-flow__controls {
  background: #0c1120;
  border: 1px solid rgba(212, 218, 232, 0.06);
  border-radius: 4px;
}
.react-flow__controls-button {
  background: #111729;
  border-color: rgba(212, 218, 232, 0.06);
}
.react-flow__controls-button:hover {
  background: rgba(91, 154, 139, 0.08);
}

@keyframes flowLine {
  from { stroke-dashoffset: 18; }
  to { stroke-dashoffset: 0; }
}

/* ==========================================================================
   Celestial Chart Visual Elements
   Geometric structures from 18th-19th century celestial cartography:
   concentric coordinate circles, radial lines, tick marks, legend boxes,
   and double-line borders.
   ========================================================================== */

/* Celestial Grid — Hero background with concentric arcs and radial lines
   Recreates a star chart coordinate system centered at top-right (85% 15%).
   Four concentric ring arcs at different radii + conic radial spokes + grid. */
.celestial-grid {
  background:
    radial-gradient(circle at 85% 15%, transparent 498px, rgba(91,154,139,0.07) 499px, rgba(91,154,139,0.07) 501px, transparent 502px),
    radial-gradient(circle at 85% 15%, transparent 348px, rgba(91,154,139,0.05) 349px, rgba(91,154,139,0.05) 351px, transparent 352px),
    radial-gradient(circle at 85% 15%, transparent 648px, rgba(91,154,139,0.05) 649px, rgba(91,154,139,0.05) 651px, transparent 652px),
    radial-gradient(circle at 85% 15%, transparent 198px, rgba(91,154,139,0.04) 199px, rgba(91,154,139,0.04) 201px, transparent 202px),
    conic-gradient(
      from 0deg at 85% 15%,
      rgba(91,154,139,0.02) 0deg, transparent 2deg,
      transparent 28deg, rgba(91,154,139,0.02) 30deg, transparent 32deg,
      transparent 58deg, rgba(91,154,139,0.02) 60deg, transparent 62deg,
      transparent 88deg, rgba(91,154,139,0.02) 90deg, transparent 92deg,
      transparent 118deg, rgba(91,154,139,0.02) 120deg, transparent 122deg,
      transparent 148deg, rgba(91,154,139,0.02) 150deg, transparent 152deg,
      transparent 178deg, rgba(91,154,139,0.02) 180deg, transparent 182deg,
      transparent 208deg, rgba(91,154,139,0.02) 210deg, transparent 212deg,
      transparent 238deg, rgba(91,154,139,0.02) 240deg, transparent 242deg,
      transparent 268deg, rgba(91,154,139,0.02) 270deg, transparent 272deg,
      transparent 298deg, rgba(91,154,139,0.02) 300deg, transparent 302deg,
      transparent 328deg, rgba(91,154,139,0.02) 330deg, transparent 332deg,
      transparent 360deg
    ),
    linear-gradient(rgba(91,154,139,0.025) 1px, transparent 1px),
    linear-gradient(90deg, rgba(91,154,139,0.025) 1px, transparent 1px);
  background-size: 100% 100%, 100% 100%, 100% 100%, 100% 100%, 100% 100%, 80px 80px, 80px 80px;
}

/* Legend Box — Double-border cartouche from printed star charts.
   Outer border + inner inset border via ::before pseudo-element. */
.legend-box {
  border: 1px solid rgba(91,154,139,0.12);
  position: relative;
  padding: 2rem;
}
.legend-box::before {
  content: '';
  position: absolute;
  inset: 3px;
  border: 1px solid rgba(91,154,139,0.06);
  pointer-events: none;
}

/* Legend Title — Small uppercase header for legend/cartouche sections */
.legend-title {
  font-family: 'JetBrains Mono', monospace;
  font-size: 10px;
  letter-spacing: 0.15em;
  color: #a07d5a;
  text-transform: uppercase;
  padding-bottom: 0.75rem;
  margin-bottom: 1.25rem;
  border-bottom: 1px solid rgba(212,218,232,0.06);
}

/* Catalogue Marker — Star magnitude dots for feature list items */
.catalogue-marker {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  flex-shrink: 0;
  margin-top: 7px;
}

/* Coordinate Label — Small labels on celestial grid arcs (RA/Dec style) */
.coordinate-label {
  font-family: 'JetBrains Mono', monospace;
  font-size: 9px;
  color: rgba(91,154,139,0.25);
  position: absolute;
  pointer-events: none;
  user-select: none;
}

/* Stat Cell — Individual readout cell for observatory instrument panels */
.stat-cell {
  border: 1px solid rgba(212,218,232,0.06);
  padding: 1rem 1.25rem;
  font-family: 'JetBrains Mono', monospace;
}

/* Double Rule — Classic double-line horizontal rule from printed charts */
.double-rule {
  height: 3px;
  width: 100%;
  border-top: 1px solid rgba(212,218,232,0.08);
  border-bottom: 1px solid rgba(212,218,232,0.08);
}
